<style>
	.highlightred{
		background-color:red;
	}
</style>


<form novalidate ng-submit="$ctrl.submitForm();" method="post">
<div class="form-content">
  <div class="horizontal-align -start rmpm-content">
			  <div class="horizontal-align -start rmpm-code">
			    <div class="form-group rmpm">
			    		<label class="label capitalize-text">FG-IS Number</label>
			    			<input type="text" readonly class="form-control -border" value="AUTOGENERATED UPON CREATION"/>
			    </div>
			    <div class="form-group rmpm">
			    		<label class="label capitalize-text">Date</label>
			    		<input type="date" ng-model="$ctrl.pis.date" class="form-control -border"/>
			    </div>
			  </div>
		</div>
		<div class="horizontal-align -start rmpm-content">
			  <div class="horizontal-align -start rmpm-code">
			    <div class="form-group rmpm">
			    		<label class="label capitalize-text">Ship From</label>
			    		<select class="form-control select"  ng-model="$ctrl.pis.fromDepot.id" ng-options="d.id as d.name for d in $ctrl.userAssignedDepots" name="fromDepots">
           					</select>	
			    </div>
			    <div class="form-group rmpm">
			    		<label class="label capitalize-text">Ship To</label>
			    		<select class="form-control select" ng-model="$ctrl.pis.toDepot.id" ng-options="d.id as d.name for d in $ctrl.depots" name="toDepots">
           					</select>	
			    </div>
			  </div>
		</div>
    	<label class="remarks">Requested By:</label>
    	<input type="text" class="form-control -border" ng-value="$ctrl.name"/>
    <div class="form-group approve-remarks">
    	<label class="remarks">Remarks</label>
    	<textarea class="form-control -border" ng-model="$ctrl.pis.remarks" placeholder="Remarks" rows="3"></textarea>
    </div>
    <table class='table table-bordered'>
              <thead>
                <tr>
                  <th>Lot #</th>
                  <th>FG</th>
                  <th>Stock on Hand</th>
                  <th>Quantity</th>
                  <th>Remaining</th>
                </tr>
              </thead>
              <tbody>
                <tr ng-repeat="inventory in $ctrl.pis.inventoryList" ng-class="{highlightred: $ctrl.stockOnHandList[$index] - $ctrl.pis.inventoryList[$index].quantity < 0}">
                  <td>{{inventory.product.lotNumber}}</td>
                  <td>{{inventory.product.finishedGood.code}} {{inventory.product.finishedGood.name}}</td>
                  <td>{{$ctrl.stockOnHandList[$index]}}</td>
                  <td><input type="text"  ng-model="$ctrl.pis.inventoryList[$index].quantity"/></td>
                  <td>{{$ctrl.stockOnHandList[$index] - $ctrl.pis.inventoryList[$index].quantity}}</td>
                </tr>
              </tbody>
            </table>
		<div class="request-action">
			<button type="button" ng-click="$ctrl.selectFromInventory()" class="btn btn-create btn-md">Select from Inventory</button>
		</div>
    <div class="request-action">
      <button type="submit" class="btn btn-create btn-md">{{$ctrl.button}}</button>
    </div>
</div>
</form>


<find-product-inventory-modal
			inventorylist="$ctrl.inventoryList"
			issuedinventorylist="$ctrl.pis.inventoryList"
			stockonhand="$ctrl.stockOnHandList"
            message="{{ $ctrl.error }}"
            >
</find-product-inventory-modal>