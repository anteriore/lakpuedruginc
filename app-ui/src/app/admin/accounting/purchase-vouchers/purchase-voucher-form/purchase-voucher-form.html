<style>
	.highlightred{
		background-color:red;
	}
</style>


<form novalidate ng-submit="$ctrl.submitForm();" method="post">
		
		<div class="form-content">
			<div class="step-form">
				<div class="horizontal-align -between">
					<div class="side-one">
						<div class="horizontal-align -between content">
							<div class="form-group field">
								<label class="label capitalize-text">PJV Number</label>
								<input type="text" ng-if="$ctrl.pv.number != null" readonly class="form-control -border" ng-value="$ctrl.pv.number"/>
								<input type="text" ng-if="$ctrl.pv.number == null" readonly class="form-control -border" value="AUTOGENERATED UPON CREATION"/>
								
							</div>
						</div>
					</div>
					
					<div class="side-two">
						<div class="form-group">
							<div class="horizontal-align -between content">
								<div class="form-group field">
									<label class="label capitalize-text">Date</label>
									<input type="text" class="form-control -border" readonly ng-value="$ctrl.pv.date
									 | date:'dd/MM/yyyy'"/>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
		
		<input type="radio"  ng-model="$ctrl.manual" ng-checked="!$ctrl.pv.manual" value="auto" ng-change="$ctrl.toggleAdjustment(false)"/> Auto
		<input type="radio"  ng-model="$ctrl.manual" ng-checked="$ctrl.pv.manual" value="manual" ng-change="$ctrl.toggleAdjustment(true)"/> Manual
		
		
		<div ng-if="!$ctrl.pv.manual">
		<div class="horizontal-align -start rmpm-content">
			<div class="horizontal-align -start rmpm-code">
				<div class="form-group rmpm action">
					<a href="#" class="button-link btn btn-action btn-md" ng-click="$ctrl.findReceivingReceipts()" data-target="#selectRRModal"
					 data-toggle="modal">Select Receiving Receipt</a>
				</div>
				<div class="form-group rmpm">
					<label class="label capitalize-text">RR Number</label>
					<input  disabled type="text" ng-model="$ctrl.pv.rrNumber" readonly class="form-control -border"
					/>
				</div>
				<div class="form-group rmpm">
					<label class="label capitalize-text">Date</label>
					<p class="form-control -border">{{$ctrl.pv.rrDate | date}}</p>
				</div>
			</div>
		</div>
		<div class="form-content">
			<div class="step-form">
					<div class="horizontal-align -between">
						<div class="side-one">
							<div class="horizontal-align -between content">
								<div class="form-group field">
									<label class="label capitalize-text">Payee Code</label>
									<input type="text" readonly class="form-control -border" ng-model="$ctrl.pv.vendor.code" />
								</div>
								<div class="form-group field">
									<label class="label capitalize-text">Payee</label>
									<input type="text" readonly ng-model="$ctrl.pv.vendor.name" class="form-control -border" />
								</div>
							</div>
						</div>
					</div>
			</div>
		</div>

		<table class='table table-list'>
              <tbody>
              	<tr>
              		<th>SI #</th>
              		<td>{{$ctrl.pv.siNumber}}</td>
              	</tr>
              	<tr>
              		<th>DR #</th>
              		<td>{{$ctrl.pv.drNumber}}</td>
              	</tr>
              	<tr>
              		<th>PO #</th>
              		<td>{{$ctrl.pv.poNumber}}</td>
              	</tr>
              </tbody>
			</table>
		</div>
		<div ng-if="$ctrl.pv.manual">
			<div class="horizontal-align -start rmpm-content">
			<div class="horizontal-align -start rmpm-code">
				<div class="form-group rmpm" ng-class="{highlightred: $ctrl.rrValidFlag === 'false'}">
					<label class="label capitalize-text">RR Number</label>
					<input type="text" ng-model="$ctrl.pv.rrNumber" class="form-control -border"
					/>
				</div>
				<div class="form-group rmpm">
					<label class="label capitalize-text">Date</label>
					<input type="date" ng-if="$ctrl.pv.rrDate == null" ng-model="$ctrl.pv.rrDate" class="form-control -border"
					/>
					<p ng-if="$ctrl.pv.rrDate != null" class="form-control -border">{{$ctrl.pv.rrDate | date}}</p>
				</div>
			</div>
		</div>
		<div class="horizontal-align -start rmpm-content">
			  <div class="horizontal-align -start rmpm-code">
			    <div class="form-group rmpm action">
			    		<a href="#" class="button-link btn btn-action btn-md" data-target="#findVendorModal" data-toggle="modal">Select Vendor</a>
			    </div>
			    <div class="form-group rmpm">
			    		<label class="label capitalize-text">Payee Code</label>
			    		<input type="text" ng-model="$ctrl.pv.vendor.code" class="form-control -border"/>
			    </div>
			  </div>
			  <div class="side-two">
			    <div class="form-group">
			      	<label class="label capitalize-text">Payee</label>
			    		<input type="text" ng-model="$ctrl.pv.vendor.name" class="form-control -border"/>
			    </div>
			  </div>
		</div>

		<table class='table table-list'>
              <tbody>
              	<tr>
              		<th>SI #</th>
              		<td><input type="text" ng-model="$ctrl.pv.siNumber"/></td>
              	</tr>
              	<tr>
              		<th>DR #</th>
              		<td><input type="text" ng-model="$ctrl.pv.drNumber"/></td>
              	</tr>
              	<tr>
              		<th>PO #</th>
              		<td><input type="text" ng-model="$ctrl.pv.poNumber"/></td>
              	</tr>
              </tbody>
			</table>
		</div>
		
		<account-title-table
			accounttitles="$ctrl.pv.accountTitles",
			readonly="false"
		></account-title-table>
		
			<div class="step-form">
			<div class="horizontal-align -between">
				<div class="side-one">
					<div class="horizontal-align -between content">
						<div class="form-group field">
							<label class="label capitalize-text">Remarks</label>
							<textarea type="text" class="form-control -border" ng-model="$ctrl.pv.remarks"></textarea>
						</div>
					</div>
				</div>
			</div>
		</div>
			<div class="request-action" ng-if="!$ctrl.printFlag">
					<button type="submit" ng-if="$ctrl.rrValidFlag || !$ctrl.pv.manual" class="btn btn-create btn-md">{{$ctrl.button}}</button>
					<button type="button" ng-if="!$ctrl.rrValidFlag && $ctrl.pv.manual" ng-click="$ctrl.validateRrNumber()" class="btn btn-create btn-md">Validate</button>
					
				</div>
			<div class="request-action" ng-if="$ctrl.printFlag">
					<a target="_blank" href="/admin/shared/print-purchase-voucher/{{$ctrl.pv.id}}" class="btn btn-info">Print PJV</a>
			</div>
	
	
</form>



<div class='modal fade' id='selectRRModal'>
		<div class="modal-dialog -bg">
			<div class="modal-content">
				<div class="modal-header">
					<h4 class="modal-title">
						Find Receiving Receipt
					</h4>
					<button class="close" data-dismiss="modal" type="button">
					</button>
				</div>
					<div class="wrapper scroll-section">
						<table class='table table-hover'>
							<thead>
								<tr>
									<th>RR</th>
									<th>Date</th>
									<th>Status</th>
									<th>DR</th>
									<th>SI</th>
									<th>PO</th>
									<th></th>
								</tr>
							</thead>
							<tbody>
								<tr ng-repeat="rr in $ctrl.receivingReceipts">
									<td>{{rr.number}}</td>
									<td>{{rr.date | date}}</td>
									<td>{{rr.status}}</td>
									<td>{{rr.drNumber}}</td>
									<td>{{rr.siNumber}}</td>
									<td>{{rr.poNumber}}</td>
									<td>
										<button class="btn btn-primary" ng-click="$ctrl.selectReceivingReceipt(rr)" data-dismiss="modal" type="button">Select</button>
									</td>
								</tr>
							</tbody>
						</table>
					</div>
				</div>
			</div>
		</div>
	</div>

 <account-titles
    	maintenance="false"
    ></account-titles>
    
<find-vendor-modal
			vendor="$ctrl.pv.vendor"
            message="{{ $ctrl.error }}"
            button="Select Vendor"
            >
    </find-vendor-modal>
	  