<style>
	.highlightred{
		background-color:red;
	}
	
	.highlight{
		background-color:#7ed321;
	}
</style>



<form novalidate ng-submit="$ctrl.submitForm();" method="post">
		
		<div class="form-content">
			<div class="step-form">
				<div class="horizontal-align -between">
					<div class="side-one">
						<div class="horizontal-align -between content">
							<div class="form-group field">
								<label class="label capitalize-text">CP Number</label>
								<input type="text" ng-if="$ctrl.cp.number" readonly class="form-control -border" ng-value="$ctrl.cp.number"/>
								<input type="text" ng-if="$ctrl.cp.number == null" readonly class="form-control -border" value="AUTOGENERATED UPON CREATION"/>
								
							</div>
						</div>
					</div>
					
				</div>
			</div>
		</div>
		

		<div class="horizontal-align -start rmpm-content">
			  <div class="horizontal-align -start rmpm-code">
			    <div class="form-group rmpm action">
			    		<a href="#" class="button-link btn btn-action btn-md" data-target="#findVendorModal" data-toggle="modal">Select Payee</a>
			    </div>
			    <div class="form-group rmpm">
			    		<label class="label capitalize-text">Payee Code</label>
			    		<input type="text" ng-model="$ctrl.cp.vendor.code" class="form-control -border"/>
			    </div>
			  </div>
			  <div class="side-two">
			    <div class="form-group">
			      	<label class="label capitalize-text">Payee</label>
			    		<input type="text" ng-model="$ctrl.cp.vendor.name" class="form-control -border"/>
			    </div>
			  </div>
			</div>
			<div ng-if="$ctrl.cp.vendor">
				<table class='table table-list'>
					<thead>
						<tr>
							<th>VP #</th>
							<th>Date</th>
							<th>Payee</th>
							<th>Remarks</th>
							<th>Amount</th>
							<th>View</th>
						</tr>
					</thead>
					<tbody>
						<tr ng-repeat="v in $ctrl.cp.payables">
							<td>{{v.number}}</td>
							<td>{{v.date | date}}</td>
							<td>{{v.vendor.name}}</td>
							<td>{{v.remarks}}</td>
							<td>{{v.totalAmount.toFixed(2)}}</td>
							<td>
				 				<a href="#" class="button-link btn btn-primary btn-md" ng-click="$ctrl.viewVp(v)" data-target="#vpModal" data-toggle="modal">View</a>
							</td>
						</tr>
					</tbody>
					<tfoot>
						<tr>
							<th></th>
							<th></th>
							<th></th>
							<th></th>
							<th>Total Amount:</th>
							<th>{{$ctrl.totalAmount.toFixed(2)}}</th>
						</tr>
					</tfoot>
				</table>
				<div class="request-action">
				 <a href="#" class="button-link btn btn-action btn-md" ng-click="$ctrl.findVouchersPayable()" data-target="#selectMultipleVoucherModal" data-toggle="modal">Select Voucher</a>
				</div>
			</div>
			
			<div class="form-content">
			<div class="step-form">
				<div class="horizontal-align -between">
					<div class="side-one">
						<div class="horizontal-align -between content">
							<div class="form-group field">
								<label class="label capitalize-text">Cheque No</label>
								<input type="text" ng-model="$ctrl.cp.chequeNumber" class="form-control -border"/>
								
							</div>
						</div>
					</div>
					<div class="side-two">
						<div class="horizontal-align -between content">
							<div class="form-group field">
								<label class="label capitalize-text">Cheque Date</label>
								<input type="date" ng-model="$ctrl.cp.chequeDate" class="form-control -border" />
								
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
		<div class="form-content">
			<div class="step-form">
				<div class="horizontal-align -between">
					<div class="side-one">
						<div class="horizontal-align -between content">
							<div class="form-group field">
								<label class="label capitalize-text">Payee Name</label>
								<input type="text" ng-model="$ctrl.cp.payeeName" class="form-control -border" />
								
							</div>
						</div>
					</div>
					<div class="side-two">
						<div class="horizontal-align -between content">
							<div class="form-group field">
								<label class="label capitalize-text">Bank Account</label>
									<select class="form-control select -border" ng-model="$ctrl.cp.bankAccount" ng-options="b as b.name for b in $ctrl.bankAccounts" name="bankAccounts">
									</select>															
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
			<div class="step-form">
			<div class="horizontal-align -between">
				<div class="side-one">
					<div class="horizontal-align -between content">
						<div class="form-group field">
							<label class="label capitalize-text">Remarks</label>
							<textarea type="text" class="form-control -border" ng-model="$ctrl.cp.remarks"></textarea>
						</div>
					</div>
				</div>
			</div>
		</div>
			<div class="request-action">
					<button type="submit" class="btn btn-create btn-md">{{$ctrl.button}}</button>
				</div>
	
	
</form>



<div class='modal fade' id='selectMultipleVoucherModal'>
		<div class="modal-dialog -bg">
			<div class="modal-content">
				<div class="modal-header">
					<h4 class="modal-title">
						Select VP
					</h4>
					<button class="close" data-dismiss="modal" type="button">
					</button>
				</div>
				<div class="search-box horizontal-align -between">
			      <div class="input-group-addon" style="border: 0	 !important;">
			          <i class="fa fa-search"></i>
			        </div>
			        <input class="form-control -borderless search" placeholder="VP No" type="text" name="search" ng-model="$ctrl.searchNumber"
			        />
			        <input class="form-control -borderless search" placeholder="Date" type="text" name="search" ng-model="$ctrl.searchDate" />
			  </div>
					<div class="wrapper scroll-section">
						<table class='table table-hover'>
							<thead>
								<tr>
									<th>VP #</th>
									<th>Date</th>
									<th>Payee</th>
									<th>Remarks</th>
									<th>Amount</th>
								</tr>
							</thead>
							<tbody>
								<tr ng-click="$ctrl.selectMultipleVouchers(p) | filter: {number: $ctrl.searchNumber, date: $ctrl.searchDate} " ng-class="{highlight: $ctrl.cp.payables.indexOf(p) !== -1}" ng-repeat="p in $ctrl.payables">
									<td>{{p.number}}</td>
									<td>{{p.date | date}}</td>
									<td>{{p.vendor.name}}</td>
									<td>{{p.remarks}}</td>
									<td>{{p.totalAmount.toFixed(2)}}</td>
								</tr>
							</tbody>
						</table>
					</div>
				</div>
			</div>
		</div>
	</div>
<find-vendor-modal
			vendor="$ctrl.cp.vendor"
            message="{{ $ctrl.error }}"
            button="Select Vendor"
            >
    </find-vendor-modal>
    
<view-vp-modal
	vp="$ctrl.vp"
></view-vp-modal>
	  